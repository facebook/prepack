machine:
  node:
    version: 7.9.0
  environment:
    PATH: "${PATH}:${HOME}/${CIRCLE_PROJECT_REPONAME}/node_modules/.bin"

compile:
  override:
    - yarn build
    - yarn build-scripts

dependencies:
  override:
    - yarn
  cache_directories:
    - ~/.cache/yarn

test:
  override:
    - yarn test-test262 -- --statusFile $CIRCLE_ARTIFACTS/test262-status.txt --timeout 120 --cpuScale 0.25 --verbose --singleThreaded test/test262/test/language/statements/for-of/dstr-obj-id-identifier-yield-ident-valid.js:
        timeout: 1800

checkout:
  post:
    - git submodule sync
    - git submodule update --init # use submodules
